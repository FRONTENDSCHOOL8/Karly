import"./style-v06b81ne.js";import{g as t,p as v}from"./header-qYaCn0IU.js";/* empty css               */import{h as B,a as V,b as N}from"./validation-DC3_Zk-Y.js";import{s as $}from"./setDocumentTitle-_OwlDZqT.js";$("칼리 | 회원가입");const i=t("html"),y=t("form fieldset"),L=t(".user_id_input"),m=t(".user_password_input"),f=t(".user_email_input"),s=t(".check_number_btn"),P=t(".user_address_btn");let{gender:q}={gender:"none"};const j=t(".birth_box"),b=t(".duplicate_id_btn"),p=t(".duplicate_alert_container"),k=t(".duplicate_alert_text"),h=t(".duplicate_email_btn"),g=t(".duplicate_email_alert_container"),w=t(".duplicate_email_alert_text"),D=t(".duplicate_number_alert_btn"),F=t(".duplicate_alert_btn"),K=t(".duplicate_email_alert_btn"),C=t(".error_message"),n=t("#user_password_error"),x=t("#user_password_check_error"),S=t("#user_email_error");let{all:U,check1:c,check2:u,check3:o,check4:_}={all:!1,check1:!1,check2:!1,check3:!1,check4:!1};const J=t(".agree_info_wrapper"),l=t("#agree_all"),r=t(".join_btn");async function M(){return(await v.collection("users").getFullList()).filter(d=>L.value===d.username).length!==0}async function R(){let a=(await v.collection("users").getFullList()).filter(d=>f.value===d.email);a.length!==0&&await v.collection("users").delete(a[0].id)}async function W(){B(L.value)?await M()?(k.textContent="이미 등록된 아이디 입니다",p.style.visibility="visible",i.style.overflowY="hidden"):(b.disabled=!0,b.classList.add("disable_btn"),k.textContent="사용 할 수 있는 아이디 입니다",p.style.visibility="visible",i.style.overflowY="hidden"):(k.textContent="6자 이상 16자 이하의 영문 혹은 영문과 숫자를 조합",p.style.visibility="visible",i.style.overflowY="hidden")}async function z(){const e={username:"",password:"111111",passwordConfirm:"111111",email:f.value,emailVisibility:!0};N(f.value)?v.collection("users").create(e).then(()=>{h.disabled=!0,h.classList.add("disable_btn"),w.textContent="사용 가능한 이메일 입니다.",g.style.visibility="visible",i.style.overflowY="hidden",R()}).catch(()=>{w.textContent="이미 등록된 이메일 입니다.",g.style.visibility="visible",i.style.overflowY="hidden"}):(w.textContent="이메일 형식으로 입력해 주세요.",g.style.visibility="visible",i.style.overflowY="hidden")}async function G(){s.disabled||(t(".duplicate_number_alert_text").textContent="믿음으로 인증되었습니다",t(".duplicate_number_alert_container").style.visibility="visible",s.classList.add("disable_btn"),i.style.overflowY="hidden",s.disabled=!0)}s.addEventListener("click",G);y.addEventListener("click",e=>{e.target.className==="duplicate_id_btn"&&W()});h.addEventListener("click",z);function E(e){e.style.visibility="hidden",i.style.overflowY="scroll"}D.addEventListener("click",()=>E(t(".duplicate_number_alert_container")));F.addEventListener("click",()=>E(p));K.addEventListener("click",()=>E(g));L.addEventListener("input",e=>{b.disabled=!1,b.classList.remove("disable_btn"),B(e.target.value)?C.classList.remove("is_invalid"):C.classList.add("is_invalid")});m.addEventListener("input",e=>{let a=V(e.target.value);e.target.value&&e.target.value.length<6?(n.classList.add("is_invalid"),n.textContent="최소 6자 이상 입력"):e.target.value.length>16?(n.classList.add("is_invalid"),n.textContent="최대 16자 까지 입력"):a?n.classList.remove("is_invalid"):n.textContent="특수문자 포함 최소 6자 - 최대 16자"});y.addEventListener("input",e=>{e.target.id==="user_password_check"&&(e.target.value===m.value?x.classList.remove("is_invalid"):x.classList.add("is_invalid"))});f.addEventListener("input",e=>{h.disabled=!1,h.classList.remove("disable_btn"),N(e.target.value)?S.classList.remove("is_invalid"):S.classList.add("is_invalid")});y.addEventListener("input",e=>{if(e.target.id!=="user_phone")return;let a=e.target.value;isNaN(a)?e.target.value="":(e.target.value=a,a?(s.classList.remove("disable_btn"),s.disabled=!1):(s.classList.add("disable_btn"),s.disabled=!0))});function Y(){new daum.Postcode({oncomplete:function(e){if(e.userSelectedType==="R")document.querySelector(".user_address_input").value=e.roadAddress,document.querySelector(".user_address_wrapper").classList.add("address_hidden"),document.querySelector(".user_detail_address_wrapper").classList.remove("address_hidden"),document.querySelector("#user_detail_address").value="";else if(e.userSelectedType==="J")document.querySelector(".user_address_input").value=e.jibunAddress,document.querySelector(".user_address_wrapper").classList.add("address_hidden"),document.querySelector(".user_detail_address_wrapper").classList.remove("address_hidden"),document.querySelector("#user_detail_address").value="";else return}}).open({popupKey:"popup1",popupTitle:"칼리 - 마켓칼리/뷰티칼리",left:window.screen.width/2-530/2,top:window.screen.height/2-630/2})}P.addEventListener("click",Y);t(".check_detail_address_btn").addEventListener("click",Y);y.addEventListener("change",function(e){e.target.name==="gender"&&(q=e.target.value)});function H(e){if(e.target.id==="year"&&e.target.value.length>4){e.target.value=e.target.value.toString(),e.target.value=e.target.value.slice(0,4);let a=Number(e.target.value);a>=1900&&a<=2024&&(e.target.textContent=e.target.value)}else if(e.target.id==="month"&&e.target.value.length>2){e.target.value=e.target.value.toString(),e.target.value=e.target.value.slice(0,2);let a=Number(e.target.value);a>=1&&a<=12&&(e.target.textContent=e.target.value)}else if(e.target.id==="day"&&e.target.value.length>2){e.target.value=e.target.value.toString(),e.target.value=e.target.value.slice(0,2);let a=Number(e.target.value);a>=1&&a<=31&&(e.target.textContent=e.target.value)}}j.addEventListener("input",e=>H(e));function O(){const e={username:L.value,password:m.value,passwordConfirm:m.value,name:t(".user_name_input").value,email:f.value,emailVisibility:!0,phone:t(".user_phone_input").value,address:`${t(".user_address_input").value} ${t("#user_detail_address").value}`,gender:q,birth:`${t("#year").value}${t("#month").value}${t("#day").value}`};v.collection("users").create(e).then(()=>location.href="/Karly/src/pages/login/")}r.addEventListener("click",O);function I(e){for(let a=1;a<5;a++)t(`#check_${a}`).checked=e}l.addEventListener("click",function(){l.checked?I(!0):I(!1)});function Q(e){e.target.name==="agree_all"?e.target.checked?(c=!0,u=!0,o=!0,_=!0):(c=!1,u=!1,o=!1,_=!1):e.target.name==="check_1"?e.target.checked?c=!0:(c=!1,l.checked=!1):e.target.name==="check_2"?e.target.checked?u=!0:(u=!1,l.checked=!1):e.target.name==="check_3"?e.target.checked?o=!0:(o=!1,l.checked=!1):e.target.name==="check_4"&&(e.target.checked?_=!0:(_=!1,l.checked=!1)),X(c,u,o,_,U)}function X(e,a,d,A,T){r.classList.add("disable_btn"),r.disabled=!0,e&&a&&!d&&A?(r.classList.remove("disable_btn"),r.disabled=!1,l.checked=!1):(e&&a&&A||T)&&(r.classList.remove("disable_btn"),r.disabled=!1,l.checked=!0)}J.addEventListener("change",e=>Q(e));
